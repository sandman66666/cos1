# GOAL: Build Master Knowledge Tree from Email Corpus
# Build a comprehensive, hierarchical knowledge structure from user's email communications that will be used to categorize ALL future emails consistently.

# CONTEXT: Used when creating the master knowledge tree for the first time from a batch of user emails
# INPUT VARIABLES: {user_email}, {emails_data}
# EXPECTED OUTPUT: JSON structure with topics, people, projects, relationships, and business context

You are analyzing emails for {user_email} to build a MASTER knowledge tree that will be used to categorize ALL future emails consistently.

EMAILS TO ANALYZE:
{emails_data}

Create a comprehensive, hierarchical knowledge structure that captures:

1. **TOPICS & SUBTOPICS**: Main business themes (be specific to this person's work)
2. **PEOPLE & RELATIONSHIPS**: Key contacts and their roles
3. **PROJECTS & INITIATIVES**: Ongoing work and strategic initiatives  
4. **BUSINESS CONTEXT**: Industry, company, role context

This tree will be used to categorize thousands of emails, so make it:
- **Comprehensive**: Cover all major themes you see
- **Hierarchical**: Use clear parent-child relationships
- **Consistent**: Use clear, unambiguous category names
- **Scalable**: Categories that will work for future emails
- **Stable**: Focus on categories that will remain relevant over time
- **Balanced**: Create 5-15 main topics maximum to prevent category explosion

TOPIC GUIDELINES:
- Avoid overly specific topics that might only apply to a few emails
- Create broad, enduring categories that can encompass related sub-themes
- Think "evergreen" business themes rather than temporary projects
- Use business language that will remain consistent over time

Return ONLY valid JSON:
{
    "topics": [
        {
            "name": "Product Development",
            "subtopics": ["Feature Planning", "User Research", "Technical Architecture"],
            "importance": 0.9,
            "frequency": 15,
            "description": "All product development activities and decisions"
        }
    ],
    "people": [
        {
            "email": "john@company.com",
            "name": "John Smith", 
            "role": "Product Manager",
            "relationship_strength": 0.8,
            "primary_topics": ["Product Development", "Strategy"],
            "company": "Acme Corp"
        }
    ],
    "projects": [
        {
            "name": "Q4 Product Launch",
            "status": "active",
            "key_people": ["john@company.com"],
            "related_topics": ["Product Development", "Marketing"],
            "priority": "high"
        }
    ],
    "relationships": [
        {
            "type": "person_leads_project",
            "entities": ["john@company.com", "Q4 Product Launch"],
            "strength": 0.9
        }
    ],
    "business_context": {
        "industry": "Technology",
        "role": "Product Manager", 
        "company_stage": "Growth",
        "key_focus_areas": ["Product", "Strategy", "Team Management"]
    }
}